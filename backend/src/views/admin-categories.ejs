<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>СТНГ Service Desk – Категории</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <style>
/* ================================
   Глобальная фиксация белого текста
================================= */
body, h1, h2, h3, h4, h5, h6, p, label, span, div, td, th {
    color: #e5e7eb !important;
}

/* Input + Select */
.form-control, 
.form-select {
    color: #e5e7eb !important;
}

/* Placeholder — тоже белый */
.form-control::placeholder,
.form-select::placeholder {
    color: #9ca3af !important;
    opacity: 1;
}

/* Опции select в выпадающем списке */
.form-select option {
    background: #020617 !important;
    color: #e5e7eb !important;
}

/* Таблицы */
.table td, 
.table th {
    color: #e5e7eb !important;
}

/* Подписи, мелкий текст */
.ticket-meta,
.ticket-id {
    color: #9ca3af !important;
}

/* Hover для select */
.form-select:focus {
    border-color: #4f46e5 !important;
    box-shadow: 0 0 0 1px #4f46e5 !important;
}

/* Поля ввода в admin/categories */
input, select, textarea {
    color: #e5e7eb !important;
    background: #020617 !important;
    border-color: #1f2937 !important;
}


  </style>
</head>
<body>
<div class="app-shell">
  <header class="app-header py-2 px-3">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center gap-3">
        <div class="app-logo">СТНГ • Service Desk</div>
        <span class="badge rounded-pill text-bg-dark border border-secondary">Admin</span>
      </div>
      <div class="d-flex align-items-center gap-3">
        <a href="/admin/dashboard" class="btn btn-outline-light btn-sm">Dashboard</a>
        <a href="/" class="btn btn-outline-light btn-sm">К пользователю</a>
      </div>
    </div>
  </header>

  <main class="flex-grow-1 py-3">
    <div class="container-fluid">
      <h4 class="mb-3">Категории тикетов</h4>

      <div class="row g-3">
        <div class="col-lg-7">
          <div class="card-dark p-3">
            <h6 class="mb-3">Существующие категории (пока фейковые)</h6>
            <div class="table-responsive">
              <table class="table table-sm align-middle">
                <thead>
                <tr>
                  <th>Категория</th><th>Очередь по умолчанию</th><th>SLA (ч)</th><th>Активна</th>
                </tr>
                </thead>
<tbody>
  <% if (categories && categories.length > 0) { %>
    <% categories.forEach(cat => { %>
      <tr>
        <td><%= cat.name %></td>
        <td><%= cat.queue_name %></td>
        <td><%= cat.sla_hours %></td>
        <td><%= cat.is_active ? 'Да' : 'Нет' %></td>
      </tr>
    <% }) %>
  <% } else { %>
    <tr>
      <td colspan="4" class="text-center text-secondary">
        Категории пока не созданы
      </td>
    </tr>
  <% } %>
</tbody>
            </div>
          </div>
        </div>

        <div class="col-lg-5">
          <div class="card-dark p-3">
            <h6 class="mb-3">Добавить категорию</h6>
<form method="post" action="/admin/categories">
  <div class="mb-3">
    <label class="form-label">Название</label>
    <input type="text" class="form-control" name="name"
           placeholder="Например: VPN / удалённый доступ" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Очередь по умолчанию</label>
    <select class="form-select" name="queue_name">
      <option>СИТ — 1 линия</option>
      <option>СИТ — 2 линия</option>
      <option>DevOps</option>
      <option>Сетевики</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">SLA (часы)</label>
    <input type="number" class="form-control" name="sla_hours" value="8" min="1">
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="cat-active" name="is_active" value="1" checked>
    <label class="form-check-label" for="cat-active">Активна</label>
  </div>
  <button type="submit" class="btn btn-primary btn-sm">Сохранить</button>
</form>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>
</body>
</html>
