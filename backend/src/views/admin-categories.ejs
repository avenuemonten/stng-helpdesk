<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>СТНГ Service Desk – Категории</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  >
  <style>
    body { background-color: #0f172a; color: #e5e7eb; }
    .app-shell { min-height: 100vh; display:flex; flex-direction:column; }
    .app-header { backdrop-filter: blur(8px); background:rgba(15,23,42,.9); border-bottom:1px solid #1f2937; }
    .app-logo { font-weight:700; letter-spacing:.04em; font-size:1.1rem; text-transform:uppercase; }
    .sidebar { border-right:1px solid #1f2937; }
    .sidebar-card,.main-card { background:#020617; border-radius:1rem; border:1px solid #1f2937; }

    .badge-priority-low { background:#16a34a; }
    .badge-priority-medium { background:#f59e0b; }
    .badge-priority-high { background:#dc2626; }

    .status-pill { border-radius:999px; padding:.15rem .6rem; font-size:.75rem; }
    .status-new { background:rgba(56,189,248,.1); color:#38bdf8; }
    .status-in-progress { background:rgba(249,115,22,.1); color:#f97316; }
    .status-done { background:rgba(34,197,94,.1); color:#22c55e; }

    .ticket-id { font-family:monospace; font-size:.8rem; color:#9ca3af; }
    .ticket-meta { font-size:.8rem; color:#9ca3af; }
    .ticket-title { font-weight:500; }

    .table > :not(caption) > * > * {
        background:transparent;
        border-color:#1f2937;
        color:#e5e7eb;
        vertical-align:middle;
    }

    .nav-pills .nav-link { border-radius:999px; }
    .nav-pills .nav-link.active { background:#4f46e5; }

    /* --- инпуты / селекты / текст --- */
    .form-label,
    .sidebar-card,
    .main-card,
    .btn,
    label,
    th,
    td {
        color:#e5e7eb;
    }

    .form-control,
    .form-select {
        background:#020617;
        border-color:#1f2937;
        color:#e5e7eb;
    }

    .form-control::placeholder,
    .form-select::placeholder {
        color:#9ca3af;
        opacity:1;
    }

    .form-control:focus,
    .form-select:focus {
        background:#020617;
        border-color:#4f46e5;
        box-shadow:0 0 0 1px #4f46e5;
        color:#e5e7eb;
    }

    .form-select option {
        background:#020617;
        color:#e5e7eb;
    }

    .btn-primary { background:#4f46e5; border-color:#4f46e5; }
    .btn-primary:hover { background:#4338ca; border-color:#4338ca; }
    .btn-outline-light { border-color:#4b5563; color:#e5e7eb; }
    .btn-outline-light:hover { background:#111827; border-color:#e5e7eb; }

    @media(max-width:991.98px){
        .sidebar{border-right:none;border-bottom:1px solid #1f2937;margin-bottom:1rem;}
    }
</style>
</head>
<body>
<div class="app-shell">
  <header class="app-header py-2 px-3">
    <div class="container-fluid d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center gap-3">
        <div class="app-logo">СТНГ • Service Desk</div>
        <span class="badge rounded-pill text-bg-dark border border-secondary">Admin</span>
      </div>
      <div class="d-flex align-items-center gap-3">
        <a href="/admin/dashboard" class="btn btn-outline-light btn-sm">Dashboard</a>
        <a href="/" class="btn btn-outline-light btn-sm">К пользователю</a>
      </div>
    </div>
  </header>

  <main class="flex-grow-1 py-3">
    <div class="container-fluid">
      <h4 class="mb-3">Категории тикетов</h4>

      <div class="row g-3">
        <div class="col-lg-7">
          <div class="card-dark p-3">
            <h6 class="mb-3">Существующие категории (пока фейковые)</h6>
            <div class="table-responsive">
              <table class="table table-sm align-middle">
                <thead>
                <tr>
                  <th>Категория</th><th>Очередь по умолчанию</th><th>SLA (ч)</th><th>Активна</th>
                </tr>
                </thead>
<tbody>
  <% if (categories && categories.length > 0) { %>
    <% categories.forEach(cat => { %>
      <tr>
        <td><%= cat.name %></td>
        <td><%= cat.queue_name %></td>
        <td><%= cat.sla_hours %></td>
        <td><%= cat.is_active ? 'Да' : 'Нет' %></td>
      </tr>
    <% }) %>
  <% } else { %>
    <tr>
      <td colspan="4" class="text-center text-secondary">
        Категории пока не созданы
      </td>
    </tr>
  <% } %>
</tbody>
            </div>
          </div>
        </div>

        <div class="col-lg-5">
          <div class="card-dark p-3">
            <h6 class="mb-3">Добавить категорию</h6>
<form method="post" action="/admin/categories">
  <div class="mb-3">
    <label class="form-label">Название</label>
    <input type="text" class="form-control" name="name"
           placeholder="Например: VPN / удалённый доступ" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Очередь по умолчанию</label>
    <select class="form-select" name="queue_name">
      <option>СИТ — 1 линия</option>
      <option>СИТ — 2 линия</option>
      <option>DevOps</option>
      <option>Сетевики</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">SLA (часы)</label>
    <input type="number" class="form-control" name="sla_hours" value="8" min="1">
  </div>
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="cat-active" name="is_active" value="1" checked>
    <label class="form-check-label" for="cat-active">Активна</label>
  </div>
  <button type="submit" class="btn btn-primary btn-sm">Сохранить</button>
</form>
          </div>
        </div>
      </div>

    </div>
  </main>
</div>
</body>
</html>
